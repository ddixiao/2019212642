<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我的课表</title>
    <link rel="shortcut icon" href="./img/标题栏图片.ico">
    <link rel="stylesheet" href="./common.css">
    <link rel="stylesheet" href="./index.css">
    <link rel="stylesheet" href="oddWeek.css">
    <!--<script src="jQuery.js">
            $(function (){
                $('.box1').onmouseover(function (){
                    this.prop('width','350px','heifht','260px')
                })
            })
    </script>-->
</head>
<body>
<!--导航-->
    <div class="header wrapper">
        <h1>
            <a href="#">
                <img src="./img/logo.jpg" alt="logo">
            </a>
            <span>我的课表</span>
        </h1>
        <!--导航-->
        <div class="nav">
            <ul>
                <li><a href="index.html">本周课表</a></li>
                <li><a href="oddWeek.html">只看单周</a></li>
                <li><a href="evenWeek.html">只看双周</a></li>
            </ul></div>

        <!--搜索-->
        <div class="search">
            <input type="text" name="" id="sousuo" placeholder="请输入要查询的课程,例如Web程序设计">
            <div class="choicebank">
                <button id="buttonOne"><a href="javascript:;"></a></button>
                <ul class="choiceul">
                    <li><span>web</span></li>
                    <li><span>编译原理</span></li>
                    <li><span>操作系统</span></li>
                    <li><span>windows</span></li>
                    <li><span>微机原理</span></li>
                    <li><span>人工智能</span></li>
                    <li><span>实验室</span></li>
                    <li><span>专业英语</span></li>
                </ul>
            </div>

        </div>

        <!--qq头像-->
        <div class="user">
            <img src="./img/头像.jpg" alt="">
            <span>1208609809</span>
        </div>

        <!--选择栏-->


    </div>


<!--中心区域-->
    <div class="wrapper mainPage">
        <!--大字 -->
        <div class="bigWord">
            ALLRIGHT
            <!--小字-->
            <div class="smallWord">
                The harder, the more fortunate
            </div>
        </div>

        <!--右侧logo图片-->
        <div class="img">

        </div>
        <!-- 小盒子1-->
        <div class="box1">
            <p id="box1">自动生成问候语好，杜笛箫</p>
        </div>

        <!--小盒子2-->
        <div class="box2">
            <div class="smallBox2">
            <p id="date">
                动态显示今天的日期
            </p>
            <p id="time">
                动态显示时间
            </p>
            </div>
        </div>
        <!--小盒子3-->
        <div class="box3">
            <div class="smallBox2" id="smallBox3">
                现在是windows程序设计，请认真听讲
            </div>
        </div>
        <script>
            //box1
            function good(){
                var nowDate= new Date();
                var H=nowDate.getHours();
                var weekN =weekNum();
                if(H>=5 && H<9){
                    return '早上好，杜笛箫<br />'+'这周是第'+weekN+'周';
                }
                else if (H>=9&&H<12){
                    return '上午好，杜笛箫<br />'+'这周是第'+weekN+'周';
                }
                else if(H>=12&&H<14){
                    return '中午好，杜笛箫<br />'+'这周是第'+weekN+'周';
                }
                else if(H>=14&&H<18){
                    return '下午好，杜笛箫<br />'+'这周是第'+weekN+'周';
                }
                else return '晚上好，杜笛箫<br />'+'这周是第'+weekN+'周';
            }
            var box1=document.querySelector('#box1');
            box1.innerHTML=good();
            // box2动态日期函数
            function date(){
                nowdate = new Date();
                var year=nowdate.getFullYear();
                var mon=nowdate.getMonth()+1;
                var day=nowdate.getDate();
                var dayList=['星期日','星期一','星期二','星期三','星期四','星期五','星期六'];

                var weekDay=nowdate.getDay();
                return '今天是'+year+'年'+mon+ '月' + day +'号' +dayList[weekDay];
            }

            var dateVar=document.getElementById('date');
            dateVar.innerHTML=date();
            //box2动态时间函数
            function time(){
                var nowDate= new Date();
                var H=nowDate.getHours();
                var M=nowDate.getMinutes();
                var S=nowDate.getSeconds();
                return H+'时'+M+'分'+S+'秒';
            }

            var timeVar = document.getElementById('time');
            timeVar.innerHTML=time();

            // 获取单双周数
            function weekNum(){
                var date1 = new Date();
                var date2 = new Date();
                date1.setDate(30);
                date1.setMonth(7);
                date1.setHours(0);
                date1.setMinutes(0);
                date1.setSeconds(0);
                var subDate = date2-date1;
                var weeK = parseInt(subDate / 604800000) +1;
                // console.log(diff);
                console.log(weeK);
                return weeK;
            }
            weekNum();
            //box3
            function remind(){
                var nowDate= new Date();
                // var dayList=['星期日','星期一','星期二','星期三','星期四','星期五','星期六'];
                var weekDay=nowDate.getDay();
                var H=nowDate.getHours();
                var M=nowDate.getMinutes();
                var monList = ['Windows程序设计','微机原理','大学体育1','专业英语','机器人技术与应用','实验室开会'];
                var tueList = ['编译原理','实验室值班','blank','世界三大宗教','blank','blank'];
                var wedList = ['人工智能','操作系统','blank','微机原理','blank','blank'];
                var thuList = ['实验室值班','习近平思想概论','Web程序设计','编译原理','实验室开会','blank'];
                var firList = ['操作系统','blank','blank','blank','实验室大扫除','blank'];

                var bigList = [0,monList,tueList,wedList,thuList,firList,0];
                if(weekDay==0 || weekDay==6){
                    return '您今天不用上课哦,加油!';
                }
                // if(H>22||H<8){
                //     return '现在是工作日的休息时间，<br />请好好休息哦';
                // }
                // if(H>=12&&H<14){
                //     return '现在是工作日的休息时间，<br />请好好休息哦';
                // }
                // if(H==18&&M<30){
                //     return '现在是工作日的休息时间，<br />请好好休息哦';
                // }
                if(H>=8 && H<10){
                    if(bigList[weekDay][0] == 'blank'){
                        return '现在是工作日的休息时间，<br />请好好休息或者学习哦';
                    }
                    return '现在是'+bigList[weekDay][0]+',<br />'+'请认真听讲哦';
                }
                else if(H>=10&& H<12){
                    if(bigList[weekDay][1] == 'blank'){
                        return '现在是工作日的休息时间，<br />请好好休息或者学习哦';
                    }
                    return '现在是'+bigList[weekDay][1]+',<br />'+'请认真听讲哦';
                }
                else if(H>=14&& H<16){
                    if(bigList[weekDay][2] == 'blank'){
                        return '现在是工作日的休息时间，<br />请好好休息或者学习哦';
                    }
                    return '现在是'+bigList[weekDay][2]+',<br />'+'请认真听讲哦';
                }
                else if(H>=16&& H<18){
                    if(bigList[weekDay][3] == 'blank'){
                        return '现在是工作日的休息时间，<br />请好好休息或者学习哦';
                    }
                    return '现在是'+bigList[weekDay][3]+',<br />'+'请认真听讲哦';
                }
                else if(H>=18&& H<20){
                    if(bigList[weekDay][4] == 'blank'){
                        return '现在是工作日的休息时间，<br />请好好休息或者学习哦';
                    }
                    return '现在是'+bigList[weekDay][4]+',<br />'+'请认真听讲哦';
                }
                else if(H>=20&& H<22){
                    if(bigList[weekDay][5] == 'blank'){
                        return '现在是工作日的休息时间，<br />请好好休息或者学习哦';
                    }
                    return '现在是'+bigList[weekDay][5]+',<br />'+'请认真听讲哦';
                }
                else {
                    return '现在是工作日的休息时间，<br />请好好休息或者学习哦';
                }

            }
            var box3=document.querySelector('#smallBox3');
            box3.innerHTML=remind();
        </script>




    </div>


<!--显示课表        -->
    <div class="tablebox wrapper" id="classschedule">
    </div>



<!--底部标签-->
    <div id="bottom"></div>


<!--计算动态时间日期的box-->
    <script>
        function weekNum(){
            var date1 = new Date();
            var date2 = new Date();
            date1.setDate(30);
            date1.setMonth(7);
            date1.setHours(0);
            date1.setMinutes(0);
            date1.setSeconds(0);
            var subDate = date2-date1;
            var weeK = parseInt(subDate / 604800000) +1;
            // console.log(diff);
            console.log(weeK);
            return weeK;
        }
        var classSchedule = document.getElementById('classschedule');
        var htmlStr1 = "<!--    表名小盒子-->\n" +
            "    <div class=\"tableH\">单周</div>\n" +
            "\n" +
            "\n" +
            "<!--    课表-->\n" +
            "    <div class=\"classTable\">\n" +
            "        <table>\n" +
            "            <tr>\n" +
            "                <th class=\"td1\"></th>\n" +
            "                <th>一</th>\n" +
            "                <th>二</th>\n" +
            "                <th>三</th>\n" +
            "                <th>四</th>\n" +
            "                <th>五</th>\n" +
            "            </tr>\n" +
            "            <tr>\n" +
            "                <td class=\"td\">8:00</td>\n" +
            "                <td class=\"Mon\" id=\"11\">Windows程序设计</td>\n" +
            "                <td class=\"Tue\" id=\"21\">编译原理</td>\n" +
            "                <td class=\"Wes\" id=\"31\">人工智能</td>\n" +
            "                <td class=\"Thu\" id=\"41\">实验室值班</td>\n" +
            "                <td class=\"Fri\" id=\"51\">操作系统</td>\n" +
            "            </tr>\n" +
            "            <tr>\n" +
            "                <td class=\"td\">10:00</td>\n" +
            "                <td class=\"Mon\" id=\"12\">微机原理</td>\n" +
            "                <td class=\"Tue\" id=\"22\">实验室值班</td>\n" +
            "                <td class=\"Wes\" id=\"32\">操作系统</td>\n" +
            "                <td class=\"Thu\" id=\"42\">习近平思想概论</td>\n" +
            "                <td class=\"blank\" id=\"52\"></td>\n" +
            "            </tr>\n" +
            "            <tr>\n" +
            "                <td class=\"td\">14:00</td>\n" +
            "                <td class=\"Mon\" id=\"13\">大学体育1</td>\n" +
            "                <td class=\"blank\" id=\"23\"></td>\n" +
            "                <td class=\"blank\" id=\"33\"></td>\n" +
            "                <td class=\"Thu\" id=\"43\">Web程序设计</td>\n" +
            "                <td class=\"blank\" id=\"53\"></td>\n" +
            "            </tr>\n" +
            "            <tr>\n" +
            "                <td class=\"td\">16:00</td>\n" +
            "                <td class=\"Mon\" id=\"14\">专业英语</td>\n" +
            "                <td class=\"Tue\" id=\"24\">世界三大宗教</td>\n" +
            "                <td class=\"Wes\" id=\"34\">微机原理</td>\n" +
            "                <td class=\"Thu\" id=\"44\">编译原理</td>\n" +
            "                <td class=\"blank\" id=\"54\"></td>\n" +
            "            </tr>\n" +
            "            <tr>\n" +
            "                <td class=\"td\">18:00</td>\n" +
            "                <td class=\"Mon\" id=\"15\">机器人技术与应用</td>\n" +
            "                <td class=\"blank\" id=\"25\"></td>\n" +
            "                <td class=\"blank\" id=\"35\"></td>\n" +
            "                <td class=\"Thu\" id=\"45\">实验室开会</td>\n" +
            "                <td class=\"Fri\" id=\"55\">实验室大扫除</td>\n" +
            "            </tr>\n" +
            "            <tr>\n" +
            "                <td class=\"td\">20:00</td>\n" +
            "                <td class=\"Mon\" id=\"16\">实验室开会</td>\n" +
            "                <td class=\"blank\" id=\"26\"></td>\n" +
            "                <td class=\"blank\" id=\"36\"></td>\n" +
            "                <td class=\"blank\" id=\"46\"></td>\n" +
            "                <td class=\"blank\" id=\"56\"></td>\n" +
            "            </tr>\n" +
            "        </table>\n" +
            "\n" +
            "\n" +
            "\n" +
            "    </div>\n" +
            "\n" +
            "\n" +
            "<!--    课表详细信息-->\n" +
            "\n" +
            "<!--    注释-->\n" +
            "    <div class=\"node\">\n" +
            "        <div>\n" +
            "            <div class=\"boxP\"></div>\n" +
            "                <div class=\"textP\">不同课程</div>\n" +
            "            <div class=\"boxB\"></div>\n" +
            "            <div class=\"textB\">查询课程</div>\n" +
            "            <div class=\"boxR\"></div>\n" +
            "            <div class=\"textR\">当前课程</div>\n" +
            "        </div>\n" +
            "    </div>";

            var htmlStr2 = '<div class="tableH">双周</div>\n' +
                '  <div class="classTable">\n' +
                '    <table>\n' +
                '      <tr>\n' +
                '        <th class="td1"></th>\n' +
                '        <th>一</th>\n' +
                '        <th>二</th>\n' +
                '        <th>三</th>\n' +
                '        <th>四</th>\n' +
                '        <th>五</th>\n' +
                '      </tr>\n' +
                '      <tr>\n' +
                '        <td class="td">8:00</td>\n' +
                '        <td class="Mon" id="11">Windows程序设计</td>\n' +
                '        <td class="Tue" id="21">Web程序设计</td>\n' +
                '        <td class="Wes" id="31">人工智能</td>\n' +
                '        <td class="Thu" id="41">实验室值班</td>\n' +
                '        <td class="Fri" id="51">操作系统</td>\n' +
                '      </tr>\n' +
                '      <tr>\n' +
                '        <td class="td">10:00</td>\n' +
                '        <td class="Mon" id="12">微机原理</td>\n' +
                '        <td class="Tue" id="22">实验室值班</td>\n' +
                '        <td class="Wes" id="32">操作系统</td>\n' +
                '        <td class="Thu" id="42">习近平思想概论</td>\n' +
                '        <td class="blank" id="52"></td>\n' +
                '      </tr>\n' +
                '      <tr>\n' +
                '        <td class="td">14:00</td>\n' +
                '        <td class="Mon" id="13">大学体育1</td>\n' +
                '        <td class="blank" id="23"></td>\n' +
                '        <td class="blank" id="33"></td>\n' +
                '        <td class="Thu" id="43">Web程序设计</td>\n' +
                '        <td class="blank" id="53"></td>\n' +
                '      </tr>\n' +
                '      <tr>\n' +
                '        <td class="td">16:00</td>\n' +
                '        <td class="Mon" id="14">专业英语</td>\n' +
                '        <td class="Tue" id="24">世界三大宗教</td>\n' +
                '        <td class="blank" id="34"></td>\n' +
                '        <td class="Thu" id="44">编译原理</td>\n' +
                '        <td class="blank" id="54"></td>\n' +
                '      </tr>\n' +
                '      <tr>\n' +
                '        <td class="td">18:00</td>\n' +
                '        <td class="Mon" id="15">机器人技术与应用</td>\n' +
                '        <td class="blank" id="25"></td>\n' +
                '        <td class="Wes" id="35">windows程序设计</td>\n' +
                '        <td class="Thu" id="45">实验室开会</td>\n' +
                '        <td class="Fri" id="55">实验室大扫除</td>\n' +
                '      </tr>\n' +
                '      <tr>\n' +
                '        <td class="td">20:00</td>\n' +
                '        <td class="Mon" id="16">实验室开会</td>\n' +
                '        <td class="blank" id="26"></td>\n' +
                '        <td class="blank" id="36"></td>\n' +
                '        <td class="blank" id="46"></td>\n' +
                '        <td class="blank" id="56"></td>\n' +
                '      </tr>\n' +
                '    </table>\n' +
                '   \n' +
                '\n' +
                '  </div>\n' +
                '\n' +
                '\n' +
                '  <!--    注释-->\n' +
                '  <div class="node">\n' +
                '    <div>\n' +
                '      <div class="boxP"></div>\n' +
                '      <div class="textP">不同课程</div>\n' +
                '      <div class="boxB"></div>\n' +
                '      <div class="textB">查询课程</div>\n' +
                '      <div class="boxR"></div>\n' +
                '      <div class="textR">当前课程</div>\n' +
                '    </div>\n' +
                '  </div>';
            var num=weekNum()%2;
            if(num==1) {
                classSchedule.innerHTML = htmlStr1;
            }
            else{
                classSchedule.innerHTML = htmlStr2;
            }
    </script>



<!--    控制选中当前课程-->
    <script>
    var nowDate= new Date();
    // var dayList=['星期日','星期一','星期二','星期三','星期四','星期五','星期六'];
    var weekDay=nowDate.getDay();
    var H=nowDate.getHours();
    var M=nowDate.getMinutes();
    var index = '';
    if(H>=8 && H<10){
        index = weekDay+'1';
    }
    else if(H>=10&& H<12){
        index = weekDay+'2';
    }
    else if(H>=14&& H<16){
        index = weekDay+'3';
    }
    else if(H>=16&& H<18){
        index = weekDay+'4';
    }
    else if(H>=18&& H<20){
        index = weekDay+'5';
    }
    else if(H>=20&& H<22){
        index = weekDay+'6';
    }
    console.log(index);
    var border = document.getElementById(index);
    border.style.border='5px solid red';
</script>

<!--搜索栏的点击，聚焦和取消聚焦-->
    <script>
    console.log('666');
    var button=document.querySelector('#buttonOne');
    var souSuo=document.getElementById('sousuo');
    var tds=document.querySelectorAll('td');
    var as=button.children[0];
    var text=souSuo.value;
    var body =document.querySelector('body');

    // 查询课程选中消失函数
    function rightFun(){
        var text=souSuo.value;
        as.setAttribute('href','javascript:;');
        for(var i=0;i<tds.length;i++){

            if(text!='' &&tds[i].innerHTML == text){
                tds[i].style.border='';
            }
        }
    }
    // 查询按钮点击
    button.onclick=function (){
        var flag=0;
        as.setAttribute('href','javascript:;');
        var text=souSuo.value;
        if(text==''){
            alert("请输入要查询的课程！");
        }
        for(var i=0;i<tds.length;i++){

            if(text!='' &&tds[i].innerHTML == text){
                as.setAttribute('href','#bottom');
                tds[i].style.border='5px solid blue';
                flag=1;
            }
        }

        if(flag==0){
            alert('找不到当前课程哦\n请看页面最下方课程具体名称\n（注意大小写哦）');
        }

        setTimeout("rightFun()","1600");
    }
    souSuo.onfocus=function (){
        this.value='';
        this.setAttribute("placeholder",'');
    }

    souSuo.onblur=function (){
        // this.value='';
        this.setAttribute('placeholder',"请输入要查询的课程，例如Web程序设计");

        for(var i=0;i<tds.length;i++){
            var text=souSuo.value;
            if(tds[i].innerHTML == text){
                tds[i].style.border='';
            }
        }
    }
</script>


<!--菜单栏-->
<script>
    var choicebank = document.querySelector('.choicebank');
    var choiceul = document.querySelector('.choiceul');
    var search = document.getElementById('sousuo');

    choicebank.onmouseover=function (){
        choiceul.style.display = 'block';
    }

    choicebank.onmouseout = function (){
        choiceul.style.display = 'none';
    }
    var lis = choiceul.children;
    console.log(lis[0].children[0].innerHTML);
    for(var i=0;i<lis.length;i++){
        lis[i].onclick =function (){
            if(this.children[0].innerHTML=='web'){
                search.value = 'Web程序设计';
            }
            else if(this.children[0].innerHTML=='windows'){
                search.value = 'Windows程序设计';

            }
            else if(this.children[0].innerHTML=='实验室'){
                search.value = '实验室值班';
            }
            else {
                search.value = this.children[0].innerHTML;
            }
        }
    }

</script>


<!--        悬浮显示详细信息-->
<script>
    var lis = ['编译原理','Web程序设计','习近平思想概论','Windows程序设计','人工智能','操作系统','微机原理','机器人技术与应用','世界三大宗教','专业英语','大学体育1','实验室值班','实验室大扫除','实验室开会'];
    var teacherlis = ['杨青','涂新辉','张艳斌','赵卫中','张连发','喻莹','金汉均','彭熙','娄宇','赵卫中','鄢润国',' ',' ',''];
    var rooms = ['N108','N108','N215','N217','N112','N213','N113','N520','N215','N113','乒羽中心','N403','N403','N403'];
    var listT = [];
    var dataSets = {
        classN:'编译原理',
        teacher:'',
        room:'N108'
    }
    for(var i =0;i < lis.length;i++){
        var data1 = new Object();
        data1.classN=lis[i];
        data1.teacher = teacherlis[i];
        data1.room = rooms[i];
        /*console.log(data1);*/
        listT.push(data1);
    }
    // console.log(listT.length);
    // for(var i=0;i<listTi++)


    var tds = document.querySelectorAll('td');
    var box = document.querySelector('.tablebox');
    for(var i=0;i<tds.length;i++){
        for(var j=0;j<lis.length;j++) {
            if(lis[j] == tds[i].innerHTML){
                console.log(tds[i].innerText);

                tds[i].onmouseover = function (){
                    console.log('66666');
                    var smallBox = document.createElement('div');
                    box.appendChild(smallBox);
                    smallBox.setAttribute("class","floatBox");

                    var num = lis.indexOf(this.innerHTML);
                    console.log(num);
                    // console.log(teacherlis[num])
                    smallBox.innerHTML = "课程名称："+lis[num]+'<br />'+'老师姓名：'+teacherlis[num]+ "<br />"+'教室位置：'+rooms[num];

                }
                tds[i].onmouseout =function (){
                    smallBox = document.querySelector('.floatBox');
                    box.removeChild(smallBox);

                }
            }
        }
    }



</script>
</body>
</html>